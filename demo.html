<!DOCTYPE html>
<html lang="en">
<head>
    <script src="script.js"></script>
    <link rel="stylesheet" href="style.css"/>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Document</title>
</head>
<body>
<!-- Here a loader is created which
        loads till response comes -->
<div class="d-flex justify-content-center">
    <div class="spinner-border" role="status" id="loading">
        <span class="sr-only">Loading...</span>
    </div>
</div>
<h1>Registered Employees</h1>
<!-- table for showing data -->
<table id="employees"></table>
<script>
        const api_url = "https://api.waqi.info/feed/here/?token=97b34cccc21af06556c13c1c12f14c67533dcd4d";

        async function getapi(url) {
            // Storing response
            const response = await fetch(url);
            // Storing data in form of JSON
            var responseJson = await response.json();
            console.log(responseJson);
            if (response) {
                hideloader();
            }
            show(responseJson);
        }

        getapi(api_url);

        function hideloader() {
            document.getElementById('loading').style.display = 'none';
        }

        function show(responseJson) {
            let table =
                `<tr>
                    <th>uid</th>
                    <th>city</th>
                    <th>aqi</th>
                    <th>time</th>
                </tr>`;

                table += `<tr>
                    <td>${responseJson.data.idx} </td>
                    <td>${responseJson.data.aqi}</td>
                    <td>${responseJson.data.city.name}</td>
                    <td>${responseJson.data.time.s}</td>
                </tr>`;
            document.getElementById("employees").innerHTML = table;
        }


</script>
</body>
</html>
